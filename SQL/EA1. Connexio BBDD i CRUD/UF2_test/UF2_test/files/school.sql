drop table if EXISTS notas;
drop table if EXISTS alumnos;
drop table if EXISTS asignaturas;
CREATE TABLE IF NOT EXISTS ALUMNOS
(  DNI VARCHAR(10) NOT NULL primary key,
  APENOM VARCHAR(30),
  DIREC VARCHAR(30),
  POBLA  VARCHAR(15),
  TELEF  VARCHAR(10)  ) ;

CREATE TABLE IF NOT EXISTS ASIGNATURAS
(  COD NUMERIC NOT NULL primary key,
  NOMBRE VARCHAR(25)) ;

CREATE TABLE IF NOT EXISTS NOTAS
(  DNI VARCHAR(10) NOT NULL ,
  COD NUMERIC NOT NULL ,
  NOTA NUMERIC, 
  primary key(DNI,COD));

/* Create Foreign Keys */
ALTER TABLE NOTAS
	ADD CONSTRAINT FKNOTASALUM FOREIGN KEY (DNI)
	REFERENCES ALUMNOS (DNI)	ON UPDATE CASCADE
	ON DELETE CASCADE;

ALTER TABLE NOTAS
	ADD CONSTRAINT FKNOTASASIG FOREIGN KEY (COD)
	REFERENCES ASIGNATURAS (COD)
	ON UPDATE CASCADE 	ON DELETE CASCADE;

/* Rellenar Datos */
INSERT  INTO ASIGNATURAS VALUES (1,'Prog. Leng. Estr.');
INSERT  INTO ASIGNATURAS VALUES (2,'Sist. Informáticos');
INSERT  INTO ASIGNATURAS VALUES (3,'Análisis');
INSERT  INTO ASIGNATURAS VALUES (4,'FOL');
INSERT  INTO ASIGNATURAS VALUES (5,'RET');

INSERT  INTO ALUMNOS VALUES ('12344345','Alcalde García, Elena', 'C/Las Matas, 24','Madrid','917766545');

INSERT  INTO ALUMNOS VALUES('4448242','Cerrato Vela, Luis', 'C/Mina 28 - 3A', 'Madrid','916566545');

INSERT   INTO ALUMNOS VALUES('56882942','Díaz Fernández, María', 'C/Luis Vives 25', 'Mostoles','915577545');

INSERT  INTO NOTAS VALUES('12344345', 1,6);
INSERT  INTO NOTAS VALUES('12344345', 2,5);

INSERT  INTO NOTAS VALUES('4448242', 4,6);
INSERT  INTO NOTAS VALUES('4448242', 5,8);

INSERT  INTO NOTAS VALUES('56882942', 1,8);
INSERT  INTO NOTAS VALUES('56882942', 3,7);

commit;
